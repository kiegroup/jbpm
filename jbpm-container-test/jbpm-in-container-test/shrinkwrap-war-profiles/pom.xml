<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>org.jbpm</groupId>
    <artifactId>jbpm-in-container-test</artifactId>
    <version>7.11.0-SNAPSHOT</version>
  </parent>

  <artifactId>shrinkwrap-war-profiles</artifactId>

  <name>jBPM :: Container Test Shrinkwrap WAR Profiles</name>

  <description>jBPM Container Test Shrinkwrap WAR Profiles</description>

  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>org.jbpm</groupId>
        <artifactId>jbpm-container-integration-deps</artifactId>
        <version>${project.version}</version>
        <type>pom</type>
        <scope>import</scope>
      </dependency>
    </dependencies>
  </dependencyManagement>

  <!--Default dependencies for all archives-->
  <dependencies>
    <dependency>
      <groupId>org.assertj</groupId>
      <artifactId>assertj-core</artifactId>
    </dependency>
  </dependencies>

  <!-- Configuration for specific integration modules -->
  <profiles>
    <profile>
      <id>hibernate-entitymanager</id>
      <dependencies>
        <dependency>
          <groupId>org.jbpm</groupId>
          <artifactId>idep-hibernate-entitymanager</artifactId>
        </dependency>
      </dependencies>
    </profile>

    <profile>
      <id>jbpm</id>
      <dependencies>
        <dependency>
          <groupId>org.jbpm</groupId>
          <artifactId>idep-jbpm</artifactId>
          <exclusions>
            <!-- conflicts with Hibernate on WAS -->
            <exclusion>
              <groupId>org.hibernate.javax.persistence</groupId>
              <artifactId>hibernate-jpa-2.1-api</artifactId>
            </exclusion>
            <!-- conflicts with Weld and Hibernate on WAS -->
            <exclusion>
              <groupId>org.javassist</groupId>
              <artifactId>javassist</artifactId>
            </exclusion>
            <!-- conflicts on WebLogic/WAS -->
            <exclusion>
              <groupId>org.codehaus.woodstox</groupId>
              <artifactId>woodstox-core-asl</artifactId>
            </exclusion>
            <!-- conflicts on WebLogic/WAS -->
            <exclusion>
              <groupId>org.jboss.spec.javax.annotation</groupId>
              <artifactId>jboss-annotations-api_1.2_spec</artifactId>
            </exclusion>
          </exclusions>
        </dependency>
      </dependencies>
    </profile>

    <profile>
      <id>jbpm-ejb-services</id>
      <dependencies>
        <dependency>
          <groupId>org.jbpm</groupId>
          <artifactId>idep-jbpm-ejb-services</artifactId>
          <exclusions>
            <!-- conflicts with Hibernate on WAS -->
            <exclusion>
              <groupId>org.hibernate.javax.persistence</groupId>
              <artifactId>hibernate-jpa-2.1-api</artifactId>
            </exclusion>
            <!-- conflicts with Weld and Hibernate on WAS -->
            <exclusion>
              <groupId>org.javassist</groupId>
              <artifactId>javassist</artifactId>
            </exclusion>
            <!-- conflicts on WebLogic/WAS -->
            <exclusion>
              <groupId>javax.enterprise</groupId>
              <artifactId>cdi-api</artifactId>
            </exclusion>
            <!-- conflicts on WebLogic/WAS -->
            <exclusion>
              <groupId>org.jboss.spec.javax.transaction</groupId>
              <artifactId>jboss-transaction-api_1.2_spec</artifactId>
            </exclusion>
            <!-- conflicts on WebLogic/WAS -->
            <exclusion>
              <groupId>javax.inject</groupId>
              <artifactId>javax.inject</artifactId>
            </exclusion>
            <!-- conflicts on WebLogic/WAS -->
            <exclusion>
              <groupId>javax.validation</groupId>
              <artifactId>validation-api</artifactId>
            </exclusion>
          </exclusions>
        </dependency>
      </dependencies>
    </profile>

    <profile>
      <id>jbpm-persistence</id>
      <dependencies>
        <dependency>
          <groupId>org.jbpm</groupId>
          <artifactId>idep-jbpm-persistence</artifactId>
          <exclusions>
            <!-- conflicts with Hibernate on EWS -->
            <exclusion>
              <groupId>org.hibernate.javax.persistence</groupId>
              <artifactId>hibernate-jpa-2.1-api</artifactId>
            </exclusion>
            <!-- conflicts with BTM/Hibernate on EWS -->
            <exclusion>
              <groupId>org.jboss.spec.javax.transaction</groupId>
              <artifactId>jboss-transaction-api_1.2_spec</artifactId>
            </exclusion>
            <!-- conflicts with Weld and Hibernate on EWS -->
            <exclusion>
              <groupId>org.javassist</groupId>
              <artifactId>javassist</artifactId>
            </exclusion>
            <!-- conflicts on WebLogic/WAS -->
            <exclusion>
              <groupId>xml-apis</groupId>
              <artifactId>xml-apis</artifactId>
            </exclusion>
            <!-- conflicts on WAS -->
            <exclusion>
              <groupId>org.jboss.spec.javax.xml.bind</groupId>
              <artifactId>jboss-jaxb-api_2.2_spec</artifactId>
            </exclusion>
          </exclusions>
        </dependency>
      </dependencies>
    </profile>

    <profile>
      <id>rest</id>
      <dependencies>
        <dependency>
          <groupId>org.jbpm</groupId>
          <artifactId>idep-rest</artifactId>
        </dependency>
      </dependencies>
    </profile>

    <!-- Container profiles below declare dependencies which are not available on all containers.
    Those dependencies will be included into generated Shrinkwrap archives. -->
    <profile>
      <id>shrinkwrap-remote-eap7</id>
      <activation>
        <property>
          <name>container.profile</name>
          <value>eap7</value>
        </property>
      </activation>
      <dependencies>
      </dependencies>
    </profile>

    <profile>
      <id>shrinkwrap-remote-wildfly11</id>
      <activation>
        <property>
          <name>container.profile</name>
          <value>wildfly11</value>
        </property>
      </activation>
      <dependencies>
      </dependencies>
    </profile>

    <profile>
      <id>shrinkwrap-ews-tomcat-8</id>
      <activation>
        <property>
          <name>container.profile</name>
          <value>tomcat9</value>
        </property>
      </activation>
      <dependencies>
        <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>slf4j-simple</artifactId>
        </dependency>
        <dependency>
          <groupId>org.jbpm</groupId>
          <artifactId>idep-hibernate-entitymanager</artifactId>
        </dependency>
        <dependency>
          <groupId>org.jboss.narayana.tomcat</groupId>
          <artifactId>tomcat-jta</artifactId>
        </dependency>
        <dependency>
          <groupId>org.jboss.spec.javax.transaction</groupId>
          <artifactId>jboss-transaction-api_1.2_spec</artifactId>
        </dependency>
      </dependencies>
    </profile>

    <profile>
      <id>shrinkwrap-remote-was9</id>
      <activation>
        <property>
          <name>container.profile</name>
          <value>was9</value>
        </property>
      </activation>
      <dependencies>
        <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>slf4j-simple</artifactId>
        </dependency>
        <!-- there is no Hibernate on WAS -->
        <dependency>
          <groupId>org.hibernate</groupId>
          <artifactId>hibernate-entitymanager</artifactId>
          <exclusions>
            <exclusion>
              <groupId>org.jboss.spec.javax.transaction</groupId>
              <artifactId>jboss-transaction-api_1.1_spec</artifactId>
            </exclusion>
            <exclusion>
              <groupId>org.hibernate.javax.persistence</groupId>
              <artifactId>hibernate-jpa-2.1-api</artifactId>
            </exclusion>
            <exclusion>
              <groupId>xml-apis</groupId>
              <artifactId>xml-apis</artifactId>
            </exclusion>
          </exclusions>
        </dependency>

        <dependency>
          <groupId>xerces</groupId>
          <artifactId>xercesImpl</artifactId>
          <exclusions><!-- conflicts on WAS -->
            <exclusion>
              <groupId>xml-apis</groupId>
              <artifactId>xml-apis</artifactId>
            </exclusion>
          </exclusions>
        </dependency>
        <dependency>
          <groupId>xalan</groupId>
          <artifactId>xalan</artifactId>
          <exclusions><!-- conflicts on WAS -->
            <exclusion>
              <groupId>xml-apis</groupId>
              <artifactId>xml-apis</artifactId>
            </exclusion>
          </exclusions>
        </dependency>
      </dependencies>
    </profile>

    <profile>
      <id>shrinkwrap-remote-wls12</id>
      <activation>
        <property>
          <name>container.profile</name>
          <value>oracle-wls-12</value>
        </property>
      </activation>
      <dependencies>
        <!-- there is no Hibernate on WLS -->
        <dependency>
          <groupId>org.hibernate</groupId>
          <artifactId>hibernate-entitymanager</artifactId>
          <exclusions>
            <exclusion>
              <groupId>org.jboss.spec.javax.transaction</groupId>
              <artifactId>jboss-transaction-api_1.1_spec</artifactId>
            </exclusion>
            <exclusion>
              <groupId>org.hibernate.javax.persistence</groupId>
              <artifactId>hibernate-jpa-2.1-api</artifactId>
            </exclusion>
            <exclusion>
              <groupId>org.javassist</groupId>
              <artifactId>javassist</artifactId>
            </exclusion>
            <exclusion>
              <groupId>xml-apis</groupId>
              <artifactId>xml-apis</artifactId>
            </exclusion>
          </exclusions>
        </dependency>
      </dependencies>
    </profile>

  </profiles>

</project>
